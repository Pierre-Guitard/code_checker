<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Accueil GitHub Explorer</title>
  
<script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
<link rel="stylesheet" href="../public/index.css">


</head>
<body>

  <div x-data="githubForm()">
    <h1>Entrez une URL GitHub</h1>

    <input 
      type="text" 
      placeholder="https://github.com/owner/repo"
      x-model="githubUrl"
    >

    <button @click="validerUrl()" type="button">
      Valider
    </button>

    <div class="error" x-text="erreur"></div>
  </div>
<div x-data="{ test: 'Ã§a marche' }">
  <p x-text="test"></p>
</div>

  <script>

    function githubForm() {
      return {
        githubUrl: '',
        erreur: '',
        validerUrl() {
          console.log('test bouton'); 

          const regex = /^https:\/\/github\.com\/[^\/]+\/[^\/]+\/?$/;

          if (regex.test(this.githubUrl.trim())) {
            window.location.href = 'dashboard.html?url=' + encodeURIComponent(this.githubUrl.trim());
          } else {
            this.erreur = " URL GitHub invalide. Format attendu : https://github.com/owner/repo";
          }
        }
      }
    }
  </script>

</body>
</html>
